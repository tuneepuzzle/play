((n,z,x)=>{function B(t,i,s){return setTimeout(k(t,s),i)}function s(t,i,s){return Array.isArray(t)&&(o(t,s[i],s),1)}function o(t,i,s){if(t)if(t.forEach)t.forEach(i,s);else if(t.length!==x)for(e=0;e<t.length;)i.call(s,t[e],e,t),e++;else for(var e in t)t.hasOwnProperty(e)&&i.call(s,t[e],e,t)}function U(s,t,i){var e="DEPRECATED METHOD: "+t+"\n"+i+" AT \n";return function(){var t=new Error("get-stack-trace"),t=t&&t.stack?t.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=n.console&&(n.console.warn||n.console.log);return i&&i.call(n.console,e,t),s.apply(this,arguments)}}function t(t,i,s){var i=i.prototype,e=t.prototype=Object.create(i);e.constructor=t,e.t=i,s&&E(e,s)}function k(t,i){return function(){return t.apply(i,arguments)}}function L(t,i){return typeof t==mt?t.apply(i&&i[0]||x,i):t}function G(t,i){return t===x?i:t}function i(i,t,s){o(h(t),function(t){i.addEventListener(t,s,!1)})}function e(i,t,s){o(h(t),function(t){i.removeEventListener(t,s,!1)})}function j(t,i){for(;t;){if(t==i)return!0;t=t.parentNode}return!1}function r(t,i){return-1<t.indexOf(i)}function h(t){return t.trim().split(/\s+/g)}function u(t,i,s){if(t.indexOf&&!s)return t.indexOf(i);for(var e=0;e<t.length;){if(s&&t[e][s]==i||!s&&t[e]===i)return e;e++}return-1}function c(t){return Array.prototype.slice.call(t,0)}function H(t,s,i){for(var e=[],n=[],h=0;h<t.length;){var o=s?t[h][s]:t[h];u(n,o)<0&&e.push(t[h]),n[h]=o,h++}return e=i?s?e.sort(function(t,i){return t[s]>i[s]}):e.sort():e}function a(t,i){for(var s,e=i[0].toUpperCase()+i.slice(1),n=0;n<pt.length;){if((s=(s=pt[n])?s+e:i)in t)return s;n++}return x}function q(t){t=t.ownerDocument||t;return t.defaultView||t.parentWindow||n}function l(i,t){var s=this;this.i=i,this.h=t,this.element=i.element,this.target=i.options.o,this.u=function(t){L(i.options.enable,[i])&&s.l(t)},this.init()}function W(t,i,s){var e,n,h,o,r,u,c,a=s.p.length,l=s.v.length,f=i&b&&a-l==0,a=i&(D|A)&&a-l==0,d=(s.m=!!f,s.g=!!a,f&&(t.session={}),s.T=i,l=s,f=(a=t).session,i=l.p,e=i.length,f.S||(f.S=Y(l)),1<e&&!f.D?f.D=Y(l):1===e&&(f.D=!1),e=f.S,h=((n=f.D)||e).A,d=l.A=V(i),l.timeStamp=gt(),l.I=l.timeStamp-e.timeStamp,l.angle=$(h,d),l.P=w(h,d),f),p=l,v=p.A,m=d.N||{},g=d.M||{},T=d.C||{},T=(p.T!==b&&T.T!==D||(g=d.M={x:T.deltaX||0,y:T.deltaY||0},m=d.N={x:v.x,y:v.y}),p.deltaX=g.x+(v.x-m.x),p.deltaY=g.y+(v.y-m.y),l.O=Z(l.deltaX,l.deltaY),e=X(l.I,l.deltaX,l.deltaY),l.R=e.x,l._=e.y,l.F=y(e.x)>y(e.y)?e.x:e.y,l.scale=n?((t,i)=>w(i[0],i[1],Nt)/w(t[0],t[1],Nt))(n.p,i):1,l.rotation=n?((t,i)=>$(i[1],i[0],Nt)+$(t[1],t[0],Nt))(n.p,i):0,l.B=!f.C||l.p.length>f.C.B?l.p.length:f.C.B,f),d=l,p=T.U||d,g=d.timeStamp-p.timeStamp;d.T!=A&&(Dt<g||p.k===x)?(c=d.deltaX-p.deltaX,v=d.deltaY-p.deltaY,g=X(g,c,v),r=g.x,u=g.y,o=y(g.x)>y(g.y)?g.x:g.y,c=Z(c,v),T.U=d):(o=p.k,r=p.velocityX,u=p.velocityY,c=p.direction),d.k=o,d.velocityX=r,d.velocityY=u,d.direction=c,h=a.element,j(l.L.target,h)&&(h=l.L.target),l.target=h,t.G("hammer.input",s),t.j(s),t.session.C=s}function Y(t){for(var i=[],s=0;s<t.p.length;)i[s]={clientX:T(t.p[s].clientX),clientY:T(t.p[s].clientY)},s++;return{timeStamp:gt(),p:i,A:V(i),deltaX:t.deltaX,deltaY:t.deltaY}}function V(t){var i=t.length;if(1===i)return{x:T(t[0].clientX),y:T(t[0].clientY)};for(var s=0,e=0,n=0;n<i;)s+=t[n].clientX,e+=t[n].clientY,n++;return{x:T(s/i),y:T(e/i)}}function X(t,i,s){return{x:i/t||0,y:s/t||0}}function Z(t,i){return t===i?At:y(t)>=y(i)?t<0?I:P:i<0?N:M}function w(t,i,s){var e=i[(s=s||Pt)[0]]-t[s[0]],i=i[s[1]]-t[s[1]];return Math.sqrt(e*e+i*i)}function $(t,i,s){var e=i[(s=s||Pt)[0]]-t[s[0]],i=i[s[1]]-t[s[1]];return 180*Math.atan2(i,e)/Math.PI}function f(){this.H=Ct,this.q=Ot,this.pressed=!1,l.apply(this,arguments)}function J(){this.H=Ft,this.q=zt,l.apply(this,arguments),this.store=this.i.session.pointerEvents=[]}function K(){this.W="touchstart",this.q="touchstart touchmove touchend touchcancel",this.Y=!1,l.apply(this,arguments)}function d(){this.W=kt,this.V={},l.apply(this,arguments)}function Q(){l.apply(this,arguments);var t=k(this.l,this);this.X=new d(this.i,t),this.Z=new f(this.i,t),this.$=null,this.J=[]}function tt(t){var i,s,t=t.v[0];t.identifier===this.$&&(i={x:t.clientX,y:t.clientY},this.J.push(i),s=this.J,setTimeout(function(){var t=s.indexOf(i);-1<t&&s.splice(t,1)},Lt))}function it(t,i){this.i=t,this.set(i)}function p(t){this.options=E({},this.K,t||{}),this.id=wt++,this.i=null,this.options.enable=G(this.options.enable,!0),this.state=1,this.tt={},this.it=[]}function st(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function et(t){return t==M?"down":t==N?"up":t==I?"left":t==P?"right":""}function v(t,i){i=i.i;return i?i.get(t):t}function m(){p.apply(this,arguments)}function nt(){m.apply(this,arguments),this.st=null,this.et=null}function ht(){m.apply(this,arguments)}function ot(){p.apply(this,arguments),this.nt=null,this.ht=null}function rt(){m.apply(this,arguments)}function ut(){m.apply(this,arguments)}function ct(){p.apply(this,arguments),this.ot=!1,this.rt=!1,this.nt=null,this.ht=null,this.count=0}function g(t,i){return(i=i||{}).ut=G(i.ut,g.K.ct),new at(t,i)}function at(t,i){this.options=E({},g.K,i||{}),this.options.o=this.options.o||t,this.at={},this.session={},this.ut=[],this.lt={},this.element=t,this.input=new((i=this).options.ft||(Et?J:St?d:yt?Q:f))(i,W),this.touchAction=new it(this,this.options.touchAction),lt(this,!0),o(this.options.ut,function(t){var i=this.add(new t[0](t[1]));t[2]&&i.dt(t[2]),t[3]&&i.vt(t[3])},this)}function lt(s,e){var n,h=s.element;h.style&&(o(s.options.gt,function(t,i){n=a(h.style,i),e?(s.lt[n]=h.style[n],h.style[n]=t):h.style[n]=s.lt[n]||""}),e||(s.lt={}))}var ft,dt,pt=["","webkit","Moz","MS","ms","o"],vt=z.createElement("div"),mt="function",T=Math.round,y=Math.abs,gt=Date.now,E="function"!=typeof Object.assign?function(t){if(t===x||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),s=1;s<arguments.length;s++){var e=arguments[s];if(e!==x&&null!==e)for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n])}return i}:Object.assign,Tt=U(function(t,i,s){for(var e=Object.keys(i),n=0;n<e.length;)s&&t[e[n]]!==x||(t[e[n]]=i[e[n]]),n++;return t},"extend","Use `assign`."),xt=U(function(t,i){return Tt(t,i,!0)},"merge","Use `assign`."),wt=1,yt="ontouchstart"in n,Et=a(n,"PointerEvent")!==x,St=yt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),S="touch",bt="mouse",Dt=25,b=1,D=4,A=8,At=1,I=2,P=4,N=8,M=16,C=I|P,O=N|M,It=C|O,Pt=["x","y"],Nt=["clientX","clientY"],Mt=(l.prototype={l:function(){},init:function(){this.H&&i(this.element,this.H,this.u),this.W&&i(this.target,this.W,this.u),this.q&&i(q(this.element),this.q,this.u)},Tt:function(){this.H&&e(this.element,this.H,this.u),this.W&&e(this.target,this.W,this.u),this.q&&e(q(this.element),this.q,this.u)}},{xt:b,wt:2,yt:D}),Ct="mousedown",Ot="mousemove mouseup",Rt=(t(f,l,{l:function(t){var i=Mt[t.type];i&b&&0===t.button&&(this.pressed=!0),2&i&&1!==t.which&&(i=D),this.pressed&&(i&D&&(this.pressed=!1),this.h(this.i,i,{p:[t],v:[t],pointerType:bt,L:t}))}}),{Et:b,St:2,bt:D,Dt:A,At:A}),_t={2:S,3:"pen",4:bt,5:"kinect"},Ft="pointerdown",zt="pointermove pointerup pointercancel",Bt=(n.MSPointerEvent&&!n.PointerEvent&&(Ft="MSPointerDown",zt="MSPointerMove MSPointerUp MSPointerCancel"),t(J,l,{l:function(t){var i=this.store,s=!1,e=t.type.toLowerCase().replace("ms",""),e=Rt[e],n=_t[t.pointerType]||t.pointerType,h=n==S,o=u(i,t.pointerId,"pointerId");e&b&&(0===t.button||h)?o<0&&(i.push(t),o=i.length-1):e&(D|A)&&(s=!0),o<0||(i[o]=t,this.h(this.i,e,{p:i,v:[t],pointerType:n,L:t}),s&&i.splice(o,1))}}),{It:b,Pt:2,Nt:D,Mt:A}),Ut=(t(K,l,{l:function(t){var i,s=Bt[t.type];s===b&&(this.Y=!0),this.Y&&(i=function(t,i){var s=c(t.touches),t=c(t.changedTouches);return[s=i&(D|A)?H(s.concat(t),"identifier",!0):s,t]}.call(this,t,s),s&(D|A)&&i[0].length-i[1].length==0&&(this.Y=!1),this.h(this.i,s,{p:i[0],v:i[1],pointerType:S,L:t}))}}),{It:b,Pt:2,Nt:D,Mt:A}),kt="touchstart touchmove touchend touchcancel",Lt=(t(d,l,{l:function(t){var i=Ut[t.type],s=function(t,i){var s=c(t.touches),e=this.V;if(i&(2|b)&&1===s.length)return e[s[0].identifier]=!0,[s,s];var n,h=c(t.changedTouches),o=[],r=this.target,u=s.filter(function(t){return j(t.target,r)});if(i===b)for(n=0;n<u.length;)e[u[n].identifier]=!0,n++;for(n=0;n<h.length;)e[h[n].identifier]&&o.push(h[n]),i&(D|A)&&delete e[h[n].identifier],n++;return o.length?[H(u.concat(o),"identifier",!0),o]:void 0}.call(this,t,i);s&&this.h(this.i,i,{p:s[0],v:s[1],pointerType:S,L:t})}}),2500),Gt=(t(Q,l,{l:function(t,i,s){var e=s.pointerType==S,n=s.pointerType==bt;if(!(n&&s.sourceCapabilities&&s.sourceCapabilities.firesTouchEvents)){if(e)!function(t,i){t&b?(this.$=i.v[0].identifier,tt.call(this,i)):t&(D|A)&&tt.call(this,i)}.call(this,i,s);else if(n&&function(t){for(var i=t.L.clientX,s=t.L.clientY,e=0;e<this.J.length;e++){var n=this.J[e],h=Math.abs(i-n.x),n=Math.abs(s-n.y);if(h<=25&&n<=25)return!0}return!1}.call(this,s))return;this.h(t,i,s)}},Tt:function(){this.X.Tt(),this.Z.Tt()}}),a(vt.style,"touchAction")),jt=Gt!==x,Ht="compute",qt="manipulation",R="none",_="pan-x",F="pan-y",Wt=jt&&(ft={},dt=n.CSS&&n.CSS.supports,["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(t){ft[t]=!dt||n.CSS.supports("touch-action",t)}),ft);it.prototype={set:function(t){t==Ht&&(t=this.Ct()),jt&&this.i.element.style&&Wt[t]&&(this.i.element.style[Gt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.i.options.touchAction)},Ct:function(){var t,i,s,e=[];return o(this.i.ut,function(t){L(t.options.enable,[t])&&(e=e.concat(t.Ot()))}),r(t=e.join(" "),R)||(i=r(t,_),s=r(t,F),i&&s)?R:i||s?i?_:F:r(t,qt)?qt:"auto"},Rt:function(t){var i=t.L,s=t.O;if(!this.i.session._t){var e=this.actions,n=r(e,R)&&!Wt[R],h=r(e,F)&&!Wt[F],e=r(e,_)&&!Wt[_];if(n)if(1===t.p.length&&t.P<2&&t.I<250)return;return(!e||!h)&&(n||h&&s&C||e&&s&O)?this.Ft(i):void 0}i.preventDefault()},Ft:function(t){this.i.session._t=!0,t.preventDefault()}},p.prototype={K:{},set:function(t){return E(this.options,t),this.i&&this.i.touchAction.update(),this},dt:function(t){var i;return s(t,"recognizeWith",this)||(i=this.tt)[(t=v(t,this)).id]||(i[t.id]=t).dt(this),this},zt:function(t){return s(t,"dropRecognizeWith",this)||(t=v(t,this),delete this.tt[t.id]),this},vt:function(t){var i;return s(t,"requireFailure",this)||-1===u(i=this.it,t=v(t,this))&&(i.push(t),t.vt(this)),this},Bt:function(t){return s(t,"dropRequireFailure",this)||(t=v(t,this),-1<(t=u(this.it,t))&&this.it.splice(t,1)),this},Ut:function(){return 0<this.it.length},kt:function(t){return!!this.tt[t.id]},G:function(i){function t(t){s.i.G(t,i)}var s=this,e=this.state;e<8&&t(s.options.event+st(e)),t(s.options.event),i.Lt&&t(i.Lt),8<=e&&t(s.options.event+st(e))},Gt:function(t){return this.jt()?this.G(t):void(this.state=32)},jt:function(){for(var t=0;t<this.it.length;){if(!(33&this.it[t].state))return!1;t++}return!0},j:function(t){t=E({},t);return L(this.options.enable,[this,t])?(56&this.state&&(this.state=1),this.state=this.process(t),void(30&this.state&&this.Gt(t))):(this.reset(),void(this.state=32))},process:function(t){},Ot:function(){},reset:function(){}},t(m,p,{K:{p:1},Ht:function(t){var i=this.options.p;return 0===i||t.p.length===i},process:function(t){var i=this.state,s=t.T,e=6&i,t=this.Ht(t);return e&&(s&A||!t)?16|i:e||t?s&D?8|i:2&i?4|i:2:32}}),t(nt,m,{K:{event:"pan",threshold:10,p:1,direction:It},Ot:function(){var t=this.options.direction,i=[];return t&C&&i.push(F),t&O&&i.push(_),i},qt:function(t){var i=this.options,s=!0,e=t.P,n=t.direction,h=t.deltaX,o=t.deltaY;return n&i.direction||(e=i.direction&C?(n=0===h?At:h<0?I:P,s=h!=this.st,Math.abs(t.deltaX)):(n=0===o?At:o<0?N:M,s=o!=this.et,Math.abs(t.deltaY))),t.direction=n,s&&e>i.threshold&&n&i.direction},Ht:function(t){return m.prototype.Ht.call(this,t)&&(2&this.state||!(2&this.state)&&this.qt(t))},G:function(t){this.st=t.deltaX,this.et=t.deltaY;var i=et(t.direction);i&&(t.Lt=this.options.event+i),this.t.G.call(this,t)}}),t(ht,m,{K:{event:"pinch",threshold:0,p:2},Ot:function(){return[R]},Ht:function(t){return this.t.Ht.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},G:function(t){var i;1!==t.scale&&(i=t.scale<1?"in":"out",t.Lt=this.options.event+i),this.t.G.call(this,t)}}),t(ot,p,{K:{event:"press",p:1,time:251,threshold:9},Ot:function(){return["auto"]},process:function(t){var i=this.options,s=t.p.length===i.p,e=t.P<i.threshold,n=i.time<t.I;if(this.ht=t,!e||!s||t.T&(D|A)&&!n)this.reset();else if(t.T&b)this.reset(),this.nt=B(function(){this.state=8,this.Gt()},i.time,this);else if(t.T&D)return 8;return 32},reset:function(){clearTimeout(this.nt)},G:function(t){8===this.state&&(t&&t.T&D?this.i.G(this.options.event+"up",t):(this.ht.timeStamp=gt(),this.i.G(this.options.event,this.ht)))}}),t(rt,m,{K:{event:"rotate",threshold:0,p:2},Ot:function(){return[R]},Ht:function(t){return this.t.Ht.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),t(ut,m,{K:{event:"swipe",threshold:10,k:.3,direction:C|O,p:1},Ot:function(){return nt.prototype.Ot.call(this)},Ht:function(t){var i,s=this.options.direction;return s&(C|O)?i=t.F:s&C?i=t.R:s&O&&(i=t._),this.t.Ht.call(this,t)&&s&t.O&&t.P>this.options.threshold&&t.B==this.options.p&&y(i)>this.options.k&&t.T&D},G:function(t){var i=et(t.O);i&&this.i.G(this.options.event+i,t),this.i.G(this.options.event,t)}}),t(ct,p,{K:{event:"tap",p:1,Wt:1,interval:300,time:250,threshold:9,Yt:10},Ot:function(){return[qt]},process:function(t){var i=this.options,s=t.p.length===i.p,e=t.P<i.threshold,n=t.I<i.time;if(this.reset(),t.T&b&&0===this.count)return this.Vt();if(e&&n&&s){if(t.T!=D)return this.Vt();e=!this.ot||t.timeStamp-this.ot<i.interval,n=!this.rt||w(this.rt,t.A)<i.Yt;if(this.ot=t.timeStamp,this.rt=t.A,n&&e?this.count+=1:this.count=1,this.ht=t,0==this.count%i.Wt)return this.Ut()?(this.nt=B(function(){this.state=8,this.Gt()},i.interval,this),2):8}return 32},Vt:function(){return this.nt=B(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this.nt)},G:function(){8==this.state&&(this.ht.Xt=this.count,this.i.G(this.options.event,this.ht))}}),g.VERSION="2.0.8",g.K={Zt:!1,touchAction:Ht,enable:!0,o:null,ft:null,ct:[[rt,{enable:!1}],[ht,{enable:!1},["rotate"]],[ut,{direction:C}],[nt,{direction:C},["swipe"]],[ct],[ct,{event:"doubletap",Wt:2},["tap"]],[ot]],gt:{userSelect:"none",$t:"none",Jt:"none",Kt:"none",Qt:"none",ti:"rgba(0,0,0,0)"}},at.prototype={set:function(t){return E(this.options,t),t.touchAction&&this.touchAction.update(),t.o&&(this.input.Tt(),this.input.target=t.o,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},j:function(t){var i=this.session;if(!i.stopped){this.touchAction.Rt(t);var s,e=this.ut,n=i.ii;(!n||8&n.state)&&(n=i.ii=null);for(var h=0;h<e.length;)s=e[h],2===i.stopped||n&&s!=n&&!s.kt(n)?s.reset():s.j(t),!n&&14&s.state&&(n=i.ii=s),h++}},get:function(t){if(t instanceof p)return t;for(var i=this.ut,s=0;s<i.length;s++)if(i[s].options.event==t)return i[s];return null},add:function(t){var i;return s(t,"add",this)?this:((i=this.get(t.options.event))&&this.remove(i),this.ut.push(t),(t.i=this).touchAction.update(),t)},remove:function(t){var i;return s(t,"remove",this)||(t=this.get(t))&&-1!==(t=u(i=this.ut,t))&&(i.splice(t,1),this.touchAction.update()),this},si:function(t,i){var s;if(t!==x&&i!==x)return s=this.at,o(h(t),function(t){s[t]=s[t]||[],s[t].push(i)}),this},ei:function(t,i){var s;if(t!==x)return s=this.at,o(h(t),function(t){i?s[t]&&s[t].splice(u(s[t],i),1):delete s[t]}),this},G:function(t,i){this.options.Zt&&(s=t,e=i,(n=z.createEvent("Event")).initEvent(s,!0,!0),(n.ni=e).target.dispatchEvent(n));var s,e,n,h=this.at[t]&&this.at[t].slice();if(h&&h.length){i.type=t,i.preventDefault=function(){i.L.preventDefault()};for(var o=0;o<h.length;)h[o](i),o++}},Tt:function(){this.element&&lt(this,!1),this.at={},this.session={},this.input.Tt(),this.element=null}},E(g,{hi:b,oi:2,ri:D,ui:A,ci:1,ai:2,li:4,fi:8,di:8,pi:16,vi:32,mi:At,DIRECTION_LEFT:I,DIRECTION_RIGHT:P,DIRECTION_UP:N,DIRECTION_DOWN:M,gi:C,Ti:O,xi:It,wi:at,yi:l,Ei:it,Si:d,bi:f,Di:J,Ai:Q,Ii:K,Pi:p,Ni:m,Mi:ct,Ci:nt,Oi:ut,Ri:ht,_i:rt,Fi:ot,si:i,ei:e,zi:o,Bi:xt,extend:Tt,assign:E,Ui:t,ki:k,Li:a}),(void 0!==n?n:"undefined"!=typeof self?self:{}).Gi=g,"function"==typeof define&&define.amd?define(function(){return g}):"undefined"!=typeof module&&module.exports?module.exports=g:n.Gi=g})(window,document);class r{constructor(t,i,s,e){if(this.ji=t,this.sampleRate=i,this.index=s,this.Hi=e,this.qi=null,!this.Hi){this.Wi=r.Yi.createBuffer(2,this.ji[0].length,this.sampleRate);var n=this.Wi.getChannelData(0),h=this.Wi.getChannelData(1);n.set(this.ji[0]),h.set(this.ji[1]);for(let t=0;t<this.ji[0].length;t++)n[t]=this.ji[0][t]*(1/32768),h[t]=this.ji[1][t]*(1/32768);this.Vi=null}}static Yi=new AudioContext;play(){return this.Hi||(this.Vi=r.Yi.createBufferSource(),this.Vi.buffer=this.Wi,this.Vi.connect(r.Yi.destination),this.Vi.start()),this.ji}}class i{constructor(t,i,s=!1){s&&console.log("Loading "+t);s=W(t);this.ji=[s[0].reverse().map(t=>-t),s[1].reverse().map(t=>-t)],this.sampleRate=s[2],3<s.length?this.Xi=e(s[3],-1):this.Xi=null,4<s.length?this.Zi=e(s[4],-1):this.Zi=null,this.Hi=i}$i(t){var i=Array.from({length:t},(t,i)=>i),s=(i.sort(()=>Math.random()-.5),[]),e=this.ji[0].length,n=Math.ceil(e/t);let h=0;for(let t=0;t<e;t+=n){var o=[this.ji[0].slice(t,t+n),this.ji[1].slice(t,t+n)];s.push(new r(o,this.sampleRate,i[h],this.Hi)),h++}return s}}function e(t,i){return t.split("").map(t=>String.fromCharCode(t.charCodeAt(0)+i)).join("")}class h{constructor(t,i,s,e,n=!1){if(this.Ji=i*s,t.Ki.length!=this.Ji)throw new Error("Number of slot GUI elements ("+this.Qi.length+") does not match the number of slots ("+this.Ji+")");this.ts=t,this.width=s,this.ss=new Array(this.Ji).fill(null),this.Qi=[],this.Hi=e,this.es=n,this.ns=!1,this.hs=!1}reset(){this.ss=new Array(this.Ji).fill(null),this.os()}rs(t){var i=t.length;if(this.es&&console.log("Loading "+i+" pieces"),this.width<i)throw new Error("Board is not wide enough for "+i+" pieces");if(this.Ji<2*i)throw new Error("Board does not have enough space for "+i+" pieces");let s=!1;for(;!s;){this.reset();var e,n,h=Array.from({length:this.Ji},(t,i)=>i);for(let t=h.length-1;0<t;t--){var o=Math.floor(Math.random()*(t+1));[h[t],h[o]]=[h[o],h[t]]}for([e,n]of h.entries())this.ss[n]=t[e];var r=this.us();r<=2?s=!0:this.es&&console.log("Maximum of "+r+" adjacent pieces, reassigning slots")}this.os()}us(){let i=0,s=1;for(let t=0;t<this.Ji;t++)null!=this.ss[t]?t%this.width==0?i=1:++i>s&&(s=i):i=0;return s}cs(t){return null!=this.ss[t]}ls(){var i=[];for(let t=0;t<this.Ji;t++)this.cs(t)&&i.push(t);return i}fs(){var i=this.ls(),s=[];for(let t=0;t<this.Ji;t++)i.includes(t)||s.push(t);return s}ds(i){if(!this.ns){if(null==this.ss[i])return console.log("Click on empty slot: "+i),null;{let t=i+1;for(;null!=this.ss[t]&&t%this.width!=0;)t++;return this.es&&console.log("Playing from slot : "+i+" to "+(t-1)),this.ps(i,t-1,!1)}}this.vs()}async ps(s,e){if(this.Hi){var n=[];let i;for(let t=s;t<=e;t++)i=this.cs(t)?this.ss[t]:this.silentPiece,n.push(i.play());return n}e<s||this.hs?(this.ns=!1,this.hs=!1):(this.ns=!0,this.ss[s].play(),this.ts.gs(s),this.ss[s].Vi.onended=()=>{console.log("Slot "+s+" finished playing"),this.ts.Ts(s),this.hs?this.hs=!1:this.ps(s+1,e)})}vs(){this.ns&&(this.es&&console.log("Interrupting audio"),this.ns=!1,this.hs=!0)}xs(t,i){if(this.cs(t))throw new Error("Slot "+t+" is already populated, cannot insert piece");this.ss[t]=i,this.os()}ws(t){var i;if(this.cs(t))return i=this.ss[t],this.ss[t]=null,this.os(),i;throw new Error("Slot "+t+" is not populated, cannot remove piece")}ys(t,i){if(!this.cs(t))throw new Error("Slot "+t+" is not populated, cannot move piece");if(this.cs(i))throw new Error("Slot "+i+" is already populated, cannot move piece");var s=this.ss[t];return this.ss[t]=null,this.ss[i]=s,this.os(),s}Es(i){for(let t=0;t<this.Ji;t++)if(this.ss[t]==i)return t;return-1}os(){var t=this.ls(),i=this.fs();t.forEach(t=>{this.ts.Ss(t)}),i.forEach(t=>{this.ts.bs(t)})}}class o{constructor(t){this.ts=t,this.Ds=0,this.As=null,this.Is=null}reset(){this.Ds=0}advance(){this.Ds++,this.Ps()}start(){this.Is&&this.stop(),this.Ps(),this.Is=setInterval(this.advance.bind(this),1e3)}stop(){clearInterval(this.Is),this.Is=null}Ns(){this.As=this.ts.Ms,this.Ps()}Ps(){this.ts.Cs(this.Os())}Os(){var t=Math.floor(this.Ds/3600).toString().padStart(2,"0"),i=Math.floor(this.Ds%3600/60).toString().padStart(2,"0"),s=(this.Ds%60).toString().padStart(2,"0");return this.Ds<3600?i+":"+s:t+":"+i+":"+s}}class t{constructor(t,i,s,e,n=!1){this.ts=t,this.Rs=i,this.Hi=e,this.es=n,this._s=!1,this.Fs=null,this.zs=null,this.Bs=s,this.Us=new h(this.ts,s[0],s[1],this.Hi,this.es),this.Ms=new o(this.ts),this.ks="",this.Ls=null}start(t){this.Fs=new i(t,this.Hi,this.es),this.ts.Gs(this.Fs.Xi,this.Fs.Zi),this.zs=this.Fs.$i(this.Rs),this.Us.reset(),this.Us.rs(this.zs),this._s=!1,this.Ns(),this.Ms.start()}end(){this.js(),this._s=!0}ys(t,i){return this.Us.cs(t)&&!this.Us.cs(i)?(this.Us.ys(t,i),this.es&&console.log("Moved from slot "+t+" to slot "+i),!0):(console.log("Unable to move from slot "+t+" to slot "+i),!1)}Hs(){var i=this.Us.Es(this.zs[0]);if(i%this.Bs[1]>this.Bs[1]-this.Rs)return!1;for(let t=i;t<i+this.Rs;t++)if(this.Us.ss[t]!=this.zs[t-i])return this.es&&console.log("Solution check: not solved"),!1;return console.log("Solution check: solved"),!0}Ns(){this.Us.os(),this.Ms.Ns(),this.ts.qs()}js(){this.ts.Ws(),this.Ms.stop(),this.ts.Ys()}Vs(t){this.Us.ds(t)}Xs(t){this.Ls=t,this.ts.Zs(Number(t.id)),this.Us.ns&&(this.es&&console.log("Slot "+t.id+" moving, interrupting audio"),this.Us.vs())}$s(){this.ts.Js(Number(this.Ls.id)),this.Ls=null}Ks(t){this._s||(this.ys(Number(this.Ls.id),Number(t.id)),this.Hs()&&(t=this.Us.Es(this.zs[0]),this.Us.ds(t),this.end()))}}let n="Tunee",s="https://tuneepuzzle.github.io/play",u="tuneepuzzle@gmail.com";var c=!1;let a=[5,6],l=[14,12],f=10,d=3,p=1.5,v=!1,m=10,g=7*m,T="Verdana",x=1.3,w="#AFAFAF",y="#5F5F5F",E="#FFC000",S=3,b="10px",D=50*m,A=19*m,I=7*m,z=1.3,B=47*m,U=37*m,k=47*m,L=2.1,G=1e3,P=7*m,N=3e3;class j{constructor(t,i=!1){this.Qs=t,this.te=t.innerHTML,this.es=i,this.ie=null}se(){var t=document.createElement("div"),i=(t.style.width=g+"px",t.style.height=g+"px",t.style.backgroundImage="url('images/piece.png')",t.style.backgroundSize="cover",t),t=t.cloneNode(!0),s=document.createElement("div"),e=(s.style.fontFamily=T,s.style.fontSize=L+"em",s.style.fontWeight="bold",s.style.color=y,s.style.userSelect="none",s.innerHTML=n,document.createElement("div")),i=(e.style.width="100%",e.style.height=g+"px",e.style.marginTop=m+"px",e.style.marginBottom=m+"px",e.style.paddingLeft=m+"px",e.style.paddingRight=m+"px",e.style.boxSizing="border-box",e.style.display="flex",e.style.justifyContent="space-between",e.style.alignItems="center",e.append(i),e.append(s),e.append(t),document.createElement("div")),s=(i.style.backgroundImage='url("images/copy.png")',i.style.backgroundSize="cover",i.style.width=P+"px",i.style.height=P+"px",i.onclick=this.ee.bind(this),document.createElement("div")),t=(s.style.width="100%",s.style.backgroundColor=w,s.style.border=S+"px solid",s.style.borderRadius=b,s.style.marginBottom=m+"px",s.style.display="flex",s.style.flexDirection="column",s.style.placeItems="center",s.appendChild(e),this.Qs.style.marginBottom=m+"px",s.appendChild(this.Qs),document.createElement("div"));return t.style.width=k+"px",t.style.display="flex",t.style.flexDirection="column",t.style.placeItems="center",t.appendChild(s),t.appendChild(i),t}ee(t){var i=this.ne();this.es&&console.log(i),navigator.clipboard.writeText(i),this.he(t.target)}he(t){t.onclick=null,t.style.backgroundImage='url("images/copied.png")',setTimeout(()=>{t.onclick=this.ee.bind(this),t.style.backgroundImage='url("images/copy.png")'},N)}ne(){var t=new Date,t=t.getFullYear()+"/"+(t.getMonth()+1).toString().padStart(2,"0")+"/"+t.getDate().toString().padStart(2,"0"),i=String.fromCodePoint(127925),t=i+" "+n+", "+t+" "+i;return(t+="\n\nTime to solve: "+this.te)+("\n\n"+s+"\n")}}class H{constructor(t,i,s,e=null,n=null,h=!1,o=!1){this.name=t,this.oe=i,this.re=s,this.Xi=e,this.Zi=n,this.ue=null,this.ce=null,this.Ki=[],this.ae=!0,this.le=null,this.Ms=null,this.fe=null,this.de=this.pe(),this.Hi=h,(this.es=o)&&(c?console.log("Detected mobile environment"):console.log("Detected desktop environment")),this.ue=this.ve()}Gs(t,i){this.Xi=t,this.Zi=i}close(){this.ue&&this.ue.remove()}ve(){return this.ue=document.createElement("div"),this.ue.style.margin="0 auto",this.ue.style.display="grid",this.ue.style.justifyItems="center",this.ue.style.alignItems="center",this.ue.appendChild(this.me()),this.ue.appendChild(this.ge()),this.ue.appendChild(this.Te()),this.ue.appendChild(this.xe()),this.ue}me(){var t=document.createElement("div"),i=(t.style.fontFamily=T,t.style.fontSize=d+"em",t.style.fontWeight="bold",t.style.color=y,t.innerHTML=this.name,document.createElement("div")),s=(i.style.fontFamily=T,i.style.fontSize=p+"em",i.style.fontWeight="bold",i.style.color=w,i.innerHTML="Put the puzzle pieces in the right order to play some music!",document.createElement("div"));return s.style.display="grid",s.style.placeItems="center",s.appendChild(t),s.appendChild(i),s}ge(){var i=document.createElement("div");i.style.backgroundColor=w,i.style.border=S+"px solid",i.style.width=g*this.re+"px",i.style.height=g*this.oe+"px",i.style.marginTop=2*m+"px",i.style.display="flex",i.style.flexWrap="wrap";for(let t=0;t<this.oe*this.re;t++){var s=this.we(t,c);i.appendChild(s),this.Ki.push(s)}return i}we(t){let i=document.createElement("div");return i.classList.add("board-slot"),i.id=t,i.style.width=g+"px",i.style.height=g+"px",i.style.border="dotted 0.25px",i.style.boxSizing="border-box",i.draggable=!1,c?((t=new Hammer(i)).get("pan").set({direction:Hammer.xi}),t.si("tap",()=>{v&&console.log("Tap: slot "+i.id),O.Vs(Number(i.id))}),t.si("panstart",()=>{this.ye(i)&&(v&&console.log("Drag start: slot "+i.id),O.Xs(i))}),t.si("panend",t=>{this.ye(i)&&(v&&(console.log("Drag end: slot "+i.id),t=document.elementFromPoint(t.A.x,t.A.y),this.Ki.includes(t))&&(this.es&&console.log("Dropped on slot "+t.id),t==i?(v&&console.log("Play: slot "+i.id),O.Vs(Number(i.id))):O.Ks(t)),O.$s())})):(i.onmouseover=()=>{this.ae&&i.classList.contains("piece")&&this.Ee(i.id)},i.onmouseout=()=>{this.Se(i.id)},i.onclick=()=>{v&&console.log("Play: slot "+i.id),O.Vs(Number(i.id))},i.ondragstart=t=>{v&&console.log("Drag start: slot "+i.id),this.Se(i.id),t.stopPropagation(),t.dataTransfer.setDragImage(this.de,g/2,g/2),t.dataTransfer.effectAllowed="move",O.Xs(i)},i.ondragend=t=>{v&&console.log("Drag end: slot "+i.id),this.Se(i.id),t.preventDefault(),O.$s()},i.ondrop=()=>{v&&console.log("Drop: slot "+i.id),this.Se(i.id),O.Ks(i)}),i}ye(t){return t.classList.contains("piece")}pe(){var t=new Image,i=(t.src="images/piece_dragged.png",t.style.width=g+"px",t.style.height=g+"px",document.createElement("div"));return i.appendChild(t),i.style.position="absolute",i.style.top=2*-g+"px",i.style.left=2*-g+"px",i}Ss(t){this.Ki[t].classList.add("piece"),this.Ki[t].draggable=!0,this.Ki[t].ondragover=null}bs(t){this.Ki[t].classList.remove("piece"),this.Ki[t].draggable=!1,this.Ki[t].ondragover=t=>{t.stopPropagation(),t.preventDefault()}}Zs(t){this.Ki[t].classList.add("piece-dragged")}Js(t){this.Ki[t].classList.remove("piece-dragged")}gs(t){this.Ki[t].classList.add("piece-playing")}Ts(t){this.Ki[t].classList.remove("piece-playing")}Ee(t){"string"==typeof t&&(t=Number(t)),this.Ki[t].classList.add("piece-mouseover")}Se(t){"string"==typeof t&&(t=Number(t)),this.Ki[t].classList.remove("piece-mouseover")}Ws(){var i;this.ae=!1;for(let t=0;t<this.Ji;t++)i=this.Ki[t],this.es&&console.log("Inactivating slot "+t),i.draggable=!1,this.Se(t)}be(){return this.le=document.createElement("div"),this.le.classList.add("action-button"),this.le.style.backgroundColor=E,this.le.style.border=S+"px solid",this.le.style.borderRadius=b,this.le.style.width=10*m+"px",this.le.style.height=10*m+"px",this.le.style.fontFamily=T,this.le.style.fontSize=x+"em",this.le.style.fontWeight="bold",this.le.style.color=y,this.le.style.display="flex",this.le.style.alignItems="center",this.le.style.justifyContent="center",this.le.style.userSelect="none",this.le}De(t){this.le.onclick=t}Ae(t){this.le.style.backgroundImage=t,this.le.style.backgroundSize="cover"}Ie(t){this.le.innerHTML=t}qs(){this.Ie(""),this.Ae("url('images/game_on.png')"),this.De(null)}Pe(t){this.Ae(""),this.Ie("Share"),this.De(t)}Ne(t){this.Ie("Copied"),this.De(null),setTimeout(t,N)}Me(){return this.Ms=document.createElement("div"),this.Ms.classList.add("timer"),this.Ms.style.backgroundColor=E,this.Ms.style.border=S+"px solid",this.Ms.style.borderRadius=b,this.Ms.style.width=15*m+"px",this.Ms.style.height=8*m+"px",this.Ms.style.fontFamily=T,this.Ms.style.fontSize=x+"em",this.Ms.style.fontWeight="bold",this.Ms.style.color=y,this.Ms.style.display="flex",this.Ms.style.alignItems="center",this.Ms.style.justifyContent="center",this.Ms.style.userSelect="none",this.Ms.innerHTML="00:00",this.Ms}Cs(t){this.Ms.innerHTML=t}Te(){var t=document.createElement("div");return t.style.width=D+"px",t.style.height=A+"px",t.style.backgroundColor=w,t.style.border=S+"px solid",t.style.borderRadius=b,t.style.marginLeft="auto",t.style.marginRight="auto",t.style.marginTop=m+"px",t.style.display="flex",t.style.justifyContent="space-around",t.style.alignItems="center",t.appendChild(this.be()),t.appendChild(this.Me()),this.ce=t}xe(){return this.fe=document.createElement("div"),this.fe.style.backgroundImage='url("images/feedback.png")',this.fe.style.backgroundSize="cover",this.fe.style.width=I+"px",this.fe.style.height=I+"px",this.fe.style.marginTop=m+"px",this.fe.title=u,this.fe.style.cursor="pointer",this.fe.onclick=()=>{window.location.href="mailto:"+u},this.fe}Ce(){var t=document.createElement("div");return null!=this.Xi&&(t.style.fontFamily=T,t.style.fontSize=z+"em",t.style.fontWeight="bold",t.style.color=y,t.style.whiteSpace="pre-wrap",t.innerHTML=this.Xi,this.es)&&console.log(this.Xi),t}Oe(){var t,i=document.createElement("div");return null!=this.Zi&&(i.style.width=B+"px",i.style.height=U+"px",i.style.display="flex",i.style.justifyContent="center",i.style.alignItems="center",(t=document.createElement("iframe")).width="100%",t.height="100%",t.src="https://www.youtube.com/embed/"+this.Zi,t.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",t.allowFullscreen=!0,i.appendChild(t)),i}Re(){var t=document.createElement("div");return t.style.display="flex",t.style.flexDirection="column",t.style.placeItems="center",t.appendChild(this.Ce()),t.style.gap=m+"px",t.appendChild(this.Oe()),t}Ys(){var t=new j(this.Ms,this.es).se();let i=document.createElement("div"),s=(i.style.display="flex",i.style.alignItems="center",i.style.marginTop=m+"px",i.appendChild(t),null==this.Xi&&null==this.Zi||(t=this.Re(),i.style.gap=3*m+"px",i.appendChild(t)),this.ce.style.opacity=1,this.fe.style.opacity=1,setInterval(()=>{0<this.ce.style.opacity?(this.ce.style.opacity-=.05,this.fe.style.opacity-=.05):(this.ce.remove(),this.ce.remove(),clearInterval(s),this.ue.append(i),this.fe.style.opacity=1,this.ue.append(this.fe))},G/20));return i}}function q(){var t=new Date;return"audio_data/"+t.getFullYear()+(t.getMonth()+1).toString().padStart(2,"0")+t.getDate().toString().padStart(2,"0")+".js"}function W(t=""){let i;return""==t?i=loadAudioDataByDate():"small.wav"==t&&(i=[[145,219,368,575,699,740,740,744,598,587,389,70,-20,-93,-455,-610,-494,-664,-763,-652,-680,-625,-564,-458,-420,-49,107,174,527,728,847,803,914,940,630,413,320,11,-338,-480,-706,-815,-767,-928,-924,-705,-674,-744,-365,-140,-138,195,472,612,815,877,908,985,948,689,438,310,9,-383,-523,-632,-870,-1001,-854,-828,-806,-648,-519,-385,-92,92,174,459,664,635,782,905,834,682,595,468,133,-34,-282,-524,-516,-610,-794,-701,-626,-746,-662,-413,-425,-279,-78,93,304,570,600,697,944,867,753,625,481,290,-104,-245,-382,-633,-767,-727,-751,-829,-715,-791,-602,-342,-281,-133,215,393,434,773,877,859,906,767,675,498,227,-91,-301,-434,-636,-770,-779,-783,-827,-753,-569,-475,-404,-206,3,170,357,484,613,779,868,779,746,656,401,126,-13,-177,-513,-574,-650,-761,-714,-708,-758,-603,-444,-475,-288,-15,26,244,469,619,746,863,832,791,728,431,188,-17,-206,-371,-628,-690,-736,-848,-807,-704,-681,-639,-392,-283,-60,178,250,496,759,843,868,968,853,628,525,272,17,-256,-485,-606,-708,-778,-872,-825,-762,-691,-567,-367,-160,-122,103,358,552,670,769,895,908,792,661,489,239,8,-233,-441,-546,-688,-856,-808,-758,-807,-706,-514,-432,-268,-97,73,323,557,623,859,944,920,878,695,511,259,-6,-267,-386,-591,-795,-827,-897,-841,-761,-751,-580,-383,-280,-124,216,323,470,694,844,976,932,796,665,500,228,-60,-231,-455,-676,-810,-843,-830,-889,-857,-677,-508,-413,-283,-65,133,321,477,718,842,878,856,788,738,467,151,-11,-193,-446,-601,-704,-828,-821,-792,-793,-620,-514,-478,-303,-67,23,232,434,637,820,835,832,841,640,433,288,6,-212,-390,-650,-740,-753,-901,-913,-725,-687,-648,-430,-336,-160,34,206,420,692,759,798],[145,223,370,576,701,740,740,741,602,588,392,70,-18,-96,-455,-613,-498,-662,-765,-650,-677,-622,-560,-454,-422,-49,110,175,530,727,851,807,913,942,632,414,317,13,-338,-484,-702,-814,-768,-925,-923,-701,-678,-743,-361,-136,-141,195,469,616,811,873,912,988,948,690,436,314,7,-379,-522,-628,-866,-999,-853,-827,-806,-647,-519,-385,-96,96,178,460,662,637,785,908,837,685,599,464,129,-35,-284,-523,-520,-608,-791,-701,-624,-743,-664,-410,-428,-276,-82,97,302,573,600,693,946,864,752,624,485,289,-107,-246,-380,-637,-768,-726,-750,-831,-715,-790,-603,-344,-282,-129,218,389,432,769,879,858,908,764,677,495,231,-87,-302,-434,-639,-774,-775,-782,-827,-751,-567,-479,-406,-202,2,168,355,487,613,780,866,783,749,653,405,122,-15,-178,-515,-575,-654,-762,-712,-712,-759,-606,-445,-474,-289,-12,25,246,471,616,747,860,832,790,726,435,188,-13,-205,-370,-628,-692,-736,-851,-806,-700,-678,-641,-389,-280,-62,177,250,492,759,840,870,964,850,624,526,272,17,-256,-481,-608,-707,-781,-873,-823,-764,-693,-571,-366,-162,-123,104,359,555,674,767,895,906,795,657,487,236,6,-232,-445,-548,-692,-852,-811,-757,-811,-710,-510,-431,-268,-98,73,325,561,625,862,947,920,878,698,515,261,-8,-263,-382,-589,-792,-825,-897,-844,-765,-752,-576,-386,-278,-127,212,319,467,698,844,979,934,797,663,496,228,-62,-229,-454,-673,-811,-846,-829,-892,-860,-674,-506,-412,-283,-66,130,318,478,715,845,879,855,791,742,470,155,-11,-194,-444,-605,-702,-832,-825,-796,-793,-621,-513,-475,-307,-63,21,229,430,639,819,837,836,839,637,434,286,7,-215,-393,-649,-740,-756,-902,-917,-724,-691,-646,-434,-339,-158,32,210,424,695,760,800],1122]),i}document.title=n;let Y=/Android/i.test(navigator.userAgent),V=/iPhone|iPad|iPod/i.test(navigator.userAgent),M=(c=Y||V,Number(c)),C=new H(n,a[M],l[M],null,null,!1,v),O=new t(C,f,[a[M],l[M]],!1,v),X=(document.body.appendChild(C.ue),C.Ie("Start"),C.De(Z),document.body.appendChild(C.de),new URLSearchParams(window.location.search)),R=X.get("d"),_,F=(_=null!=R?"audio_data/"+R+".js":q(),document.createElement("script"));function Z(){O.start("")}F.src=_,document.body.appendChild(F);
